# **☁️ 极简在线云剪贴板 (Cloud Clipboard) \- 产品设计方案 V2.0**

## **1\. 核心理念**

"Spacebridge"（空间桥梁）  
连接办公工位与会议室的快速通道。核心目标是平衡个人数据归属权与公共设备访问的便捷性，并支持多场景/多批次的资料管理。

## **2\. 用户使用流程 (User Journey) \- 升级版**

### **场景 A：在工位管理资料 (Owner \- 仪表盘模式)**

1. **身份认证**：FLC 在工位电脑打开网页，点击 **"Google 登录"**。
2. **会议资料管理（新增）**：
    * 登录后进入\*\*“我的资料包”\*\*仪表盘。
    * 列表显示历史记录：
        * 📁 *2023-10-27 周会资料* (取件码: 8848\)
        * 📁 *项目 Alpha 启动会* (取件码: 9527\)
    * 点击 **“+ 新建资料包”**，创建一个新的传输任务。
3. **编辑内容**：
    * 进入某个资料包，粘贴文本、拖拽上传 PDF/PPT。这些内容被归档在这个特定的“批次”中。
4. **激活取件码**：
    * 每个资料包都有一个独立的**取件码**。
    * 你可以随时**开启/关闭**某个码的访问权限（例如会议结束了，就关掉该码，防止泄露）。

### **场景 B：在会议室接收 (Guest/Read-only 模式)**

1. **无痕访问**：在会议室电脑打开网页，**无需登录**。
2. **输入特定取件码**：
    * 输入 9527 \-\> 获取“项目 Alpha”的资料。
    * 输入 8848 \-\> 获取“周会”的资料。
3. **获取与离场**：
    * 只能看到对应批次的内容。
    * 用完即走，无痕操作。

## **3\. 功能需求详细梳理**

### **3.1 核心功能 (MVP)**

| 功能模块 | 详细描述 | 优先级 |
| :---- | :---- | :---- |
| **多会话/批次管理** | **(新增)** 用户可以创建多个独立的“资料包” (Sessions)，每个包有独立的标题、内容和取件码。 | P0 |
| **取件码开关** | **(新增)** Owner 可以手动“冻结”或“激活”某个取件码。 | P1 |
| **Google 身份认证** | 使用 Google 账号登录，作为所有资料包的归属者。 | P0 |
| **匿名取件机制** | 访客通过 6 位数字码读取特定资料包。 | P0 |
| **文件拖拽上传** | 每个资料包独立的文件存储空间。 | P0 |

### **3.2 安全与隐私 (V2.0 策略)**

* **数据结构变化**：
    * 以前是：1个用户 \= 1个剪贴板
    * 现在是：1个用户 \= N个资料包
* **生命周期管理**：
    * **默认过期**：为了防止服务器爆炸，每个资料包默认保留 **7天**（可续期）。
    * **取件码有效期**：为了安全，虽然资料包还在，但“取件码”可以设置为 **30分钟动态有效**。会议开始前在手机/工位上点一下“刷新取件码”或“开启分享”，更安全。

### **3.3 数据存储与生命周期 (Data Strategy)**

采用 **Firestore \+ Storage** 双层架构：

* **层级 1：元数据存储 (Firestore)**
    * **作用**：存储纯文本内容（剪贴板文字）、链接、文件列表信息（文件名、大小、下载地址）、取件码映射关系。
    * **优势**：读取速度极快，毫秒级同步。
    * **结构**：users/{userId}/sessions/{sessionId}。
* **层级 2：文件对象存储 (Firebase Storage)**
    * **作用**：存储实际的 PPT、PDF、图片等二进制文件。
    * **路径隔离**：user\_uploads/{userId}/{sessionId}/{filename}。
    * **安全策略**：文件并不直接公开，只有持有有效取件码的用户，才能通过 Firestore 获取到文件的“临时下载链接”。
* **清理策略 (自动垃圾回收)**
    * 系统会自动检查 createdAt 时间。
    * 超过 7 天的文件，将触发自动清理逻辑（或在用户下次登录时提示手动清理），避免云存储空间浪费。

## **4\. 界面布局构思 (UI Mockup)**

### **4.1 登录后/工位端 (仪表盘)**

* **侧边栏**：我的资料包列表 (List)。
* **主区域**：当前选中的资料包详情。
    * **标题栏**：输入标题（如“财务汇报”）。
    * **控制区**：
        * 🟢 **分享中** | 取件码: 123-456 | \[刷新\] \[复制链接\]
    * **内容区**：
        * 文本编辑器
        * 文件列表 (支持批量下载/删除)

### **4.2 登录前/会议室端 (极简)**

* 保持不变，依旧是极致简单的“输入码 \-\> 拿文件”。

## **5\. 技术架构方案 (V2.0)**

* **前端**：Vue 3 \+ Tailwind CSS \+ Lucide Vue (图标)。
* **数据库**：Firebase Firestore。
    * 集合结构：users/{userId}/sessions/{sessionId}
    * 包含字段：title, accessCode, textContent, files\[\], isActive, createdAt。
    * **全局索引**：需要一个 accessCodes 集合用于快速通过码查找到对应的 sessionId。
* **存储**：Firebase Storage。
    * 路径：users/{userId}/{sessionId}/{filename}。

## **6\. 需要你确认的问题 (Q\&A)**

1. **取件码冲突**：因为现在每人可以有多个码，如果不使用长随机码，简单的 4 位或 6 位数字容易冲突。
    * *建议*：使用 **6位数字** (如 392 841)，系统自动生成，确保不重复。
2. **存储限制**：因为是多批次，文件量会变大。
    * *建议*：初期限制每人最多创建 **5个** 活跃资料包，每个包最大 **50MB**，足够日常会议使用，避免滥用。